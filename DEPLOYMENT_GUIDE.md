# 🚀 微信小程序部署指南

本指南专为新手开发者编写，详细介绍如何将 Hackathon Weekly 微信小程序从开发环境部署到生产环境。

## 📋 部署前准备清单

### 1. 账号准备
- [ ] 微信小程序开发账号（已注册）
- [ ] 已认证的服务号（个人账号无法使用 WebView 组件）
- [ ] hackathonweekly.com 网站管理权限（用于上传域名校验文件）

### 2. 开发环境准备
- [ ] 微信开发者工具（最新版本）
- [ ] 项目代码已下载到本地
- [ ] 网络环境稳定

## 🔧 详细部署步骤

### 第一步：小程序账号配置

#### 1.1 登录微信公众平台
1. 访问 [微信公众平台](https://mp.weixin.qq.com/)
2. 使用小程序管理员账号登录

#### 1.2 获取 AppID
1. 进入小程序管理后台
2. 在 **设置** → **基本设置** 中找到 **AppID**
3. 复制 AppID（格式类似：`wxabcdef1234567890`）

#### 1.3 配置服务器域名
1. 进入 **设置** → **开发设置**
2. 找到 **服务器域名** 部分
3. 在 **request 合法域名** 中添加：`https://hackathonweekly.com`
4. 在 **业务域名** 中添加：`hackathonweekly.com`

#### 1.4 上传域名校验文件
1. 在业务域名配置处，下载校验文件（如：`MP_verify_abcdef.txt`）
2. 联系 hackathonweekly.com 网站管理员
3. 将校验文件上传到网站根目录
4. 确保文件可通过 `https://hackathonweekly.com/MP_verify_abcdef.txt` 访问
5. 返回微信公众平台，点击 **保存**

### 第二步：项目配置

#### 2.1 修改项目配置文件
打开项目根目录下的 `project.config.json` 文件：

```json
{
  "appid": "你的AppID",  // 替换为步骤1.2中获取的AppID
  "projectname": "hackathon-weekly-miniprogram",
  // ... 其他配置保持不变
}
```

#### 2.2 版本信息配置
在 `app.js` 中更新版本信息：

```javascript
App({
  onLaunch: function () {
    console.log('小程序启动 - 版本：1.0.0');
  },
  globalData: {
    version: '1.0.0',
    webViewUrl: 'https://hackathonweekly.com/',
    buildTime: new Date().toISOString()
  }
})
```

### 第三步：开发者工具配置

#### 3.1 导入项目
1. 打开微信开发者工具
2. 点击 **新建项目**
3. 选择 **导入项目**
4. 项目目录：选择你的项目文件夹
5. AppID：输入步骤1.2中获取的AppID
6. 项目名称：`Hackathon Weekly`
7. 点击 **导入**

#### 3.2 开发设置
1. 在开发者工具中，点击右上角 **详情**
2. 在 **本地设置** 标签页中：
   - ✅ 勾选 **不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书**
   - ✅ 勾选 **启用调试**
   - ✅ 勾选 **启用热重载**

#### 3.3 预览测试
1. 点击工具栏中的 **预览** 按钮
2. 使用手机微信扫描二维码
3. 测试以下功能：
   - [ ] WebView 正常加载
   - [ ] 页面显示完整
   - [ ] 加载状态正常
   - [ ] 错误处理机制
   - [ ] 分享功能

### 第四步：版本管理

#### 4.1 设置版本号
1. 在开发者工具中，点击右上角 **上传**
2. 填写版本号：`1.0.0`
3. 填写项目备注：`初始版本 - 支持 hackathonweekly.com WebView`

#### 4.2 代码上传
1. 点击 **上传**
2. 等待上传完成（通常需要几分钟）
3. 上传成功后，代码将出现在微信公众平台的 **版本管理** 中

### 第五步：提交审核

#### 5.1 在微信公众平台提交审核
1. 登录微信公众平台
2. 进入 **版本管理** → **开发版本**
3. 找到刚上传的版本，点击 **提交审核**

#### 5.2 填写审核信息
```
功能页面：
- 页面路径：pages/index/index
- 页面标题：首页
- 功能标签：工具类

功能描述：
本小程序通过 WebView 组件展示 Hackathon Weekly 网站内容，
为用户提供最新的黑客松活动信息、技术资讯和创新项目展示。
主要功能包括浏览文章、查看活动信息、分享内容等。

测试账号：
（如果需要，提供测试账号信息）
```

#### 5.3 审核注意事项
- 📝 详细描述小程序功能和使用场景
- 🔍 确保所有功能都能正常使用
- 📱 提供清晰的使用说明
- 🚫 避免涉及敏感内容或违规功能

### 第六步：发布上线

#### 6.1 等待审核结果
- 审核时间：通常1-7个工作日
- 审核状态可在 **版本管理** 中查看
- 如果审核被拒，按照反馈修改后重新提交

#### 6.2 发布线上版本
1. 审核通过后，在 **版本管理** 中找到 **审核通过** 的版本
2. 点击 **提交发布**
3. 确认发布信息，点击 **确定**
4. 发布成功后，用户可以在微信中搜索到你的小程序

## 🔧 部署后配置

### 数据统计配置
1. 在微信公众平台启用 **数据助手**
2. 配置关键指标监控：
   - 页面访问量 (PV)
   - 独立访客数 (UV)
   - WebView 加载成功率
   - 用户停留时间

### 版本更新流程
1. 修改代码后，更新版本号
2. 重新上传代码
3. 提交审核
4. 审核通过后发布

## ⚠️ 常见问题解决

### 问题1：业务域名校验失败
**解决方案：**
1. 确认校验文件已正确上传到网站根目录
2. 检查文件权限，确保可以通过 HTTPS 访问
3. 联系网站管理员确认域名配置

### 问题2：WebView 显示空白
**解决方案：**
1. 检查目标网站是否支持在 iframe 中显示
2. 确认网站使用 HTTPS 协议
3. 查看开发者工具控制台错误信息

### 问题3：审核被拒
**常见原因及解决方案：**
- **功能描述不清晰**：详细说明小程序用途和功能
- **缺少必要页面**：确保所有声明的功能页面都存在
- **违规内容**：检查嵌入网站内容是否符合微信规范

### 问题4：分享功能异常
**解决方案：**
1. 检查 `onShareAppMessage` 函数是否正确实现
2. 确认分享路径和参数格式正确
3. 测试不同分享场景（好友、群聊、朋友圈）

## 📞 获取帮助

如果在部署过程中遇到问题：

1. **查看官方文档**：[微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/)
2. **社区求助**：微信开发者社区
3. **技术支持**：提交 GitHub Issue
4. **联系开发团队**：[团队邮箱]

## 📝 部署检查表

最后，请确认以下所有项目都已完成：

- [ ] AppID 已正确配置
- [ ] 业务域名校验已通过
- [ ] 项目在开发者工具中正常运行
- [ ] 真机预览测试通过
- [ ] 代码已上传到微信公众平台
- [ ] 审核信息已正确填写
- [ ] 版本已成功发布

---

🎉 **恭喜！** 你已成功完成 Hackathon Weekly 微信小程序的部署。

现在用户可以通过微信搜索你的小程序，享受便捷的黑客松资讯浏览体验了！
